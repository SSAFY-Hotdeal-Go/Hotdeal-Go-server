<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
    namespace="com.budge.hotdeal_go.model.mapper.SearchMapper">

    <insert id="regist" parameterType="java.util.List"> INSERT INTO hotdeal_info (TITLE, PRICE,
        SHIPPING_FEE, PURCHASING_PLACE, URL, LIKE_CNT, TIME, IMG) VALUES <foreach collection="list"
            item="item" separator=","> (#{item.title}, #{item.price}, #{item.shippingFee},
        #{item.purchasingPlace}, #{item.url}, #{item.likeCnt}, #{item.time}, #{item.img}) </foreach>
        ON DUPLICATE KEY UPDATE TITLE = VALUES(TITLE), URL = VALUES(URL); </insert>

    <select id="getFmkorea" parameterType="map" resultType="HotDealDto"> SELECT * FROM hotdeal_info
        WHERE URL LIKE "%fmkorea%" ORDER BY TIME DESC limit #{pgno}, #{npp}</select>

    <select id="getQuasarZone" parameterType="map" resultType="HotDealDto"> SELECT * FROM
        hotdeal_info WHERE URL LIKE "%quasarzone%" ORDER BY TIME DESC limit #{pgno}, #{npp}</select>

    <select id="getRuliweb" parameterType="map" resultType="HotDealDto"> SELECT * FROM hotdeal_info
        WHERE URL LIKE "%ruliweb%" ORDER BY TIME DESC limit #{pgno}, #{npp}</select>

    <select id="getList" parameterType="String" resultType="HotDealDto"> SELECT * FROM hotdeal_info
        WHERE TITLE LIKE concat('%', #{title}, '%') ORDER BY TIME DESC</select>
</mapper>